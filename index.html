<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculadora de Vinilo para Coches</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .logos {
      text-align: center;
      margin-bottom: 20px;
    }
    .logos img {
      max-height: 60px;
      margin: 0 15px;
    }
    .form-group {
      margin: 15px 0;
    }
    label {
      font-weight: bold;
    }
    select, input {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      display: block;
      width: 100%;
      padding: 15px;
      background-color: #e74c3c;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
    }
    .resultado {
      background-color: #f0f0f0;
      padding: 15px;
      margin-top: 20px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>Calculadora de Vinilo para Coches</h1>
  <div class="logos">
    <img src="img/gsix9.png" alt="GSIX9 Logo">
    <img src="img/oracal.png" alt="Oracal Logo">
    <img src="img/totenser.png" alt="Totenser Logo">
  </div>
  <div class="form-group">
    <label for="marca">Marca:</label>
    <select id="marca" onchange="cargarModelos()">
      <option value="">-- Selecciona marca --</option>
    </select>
  </div>
  <div class="form-group">
    <label for="modelo">Modelo:</label>
    <select id="modelo" onchange="mostrarDimensiones()">
      <option value="">-- Selecciona modelo --</option>
    </select>
  </div>
  <div id="dimensiones" class="form-group"></div>
  <div class="form-group">
    <label for="dificultad">Dificultad del trabajo:</label>
    <select id="dificultad">
      <option value="0">Fácil (sin recargo)</option>
      <option value="0.1">Media (+10%)</option>
      <option value="0.2">Difícil (+20%)</option>
    </select>
  </div>
  <div class="form-group">
    <label for="tipoVinilo">Tipo de vinilo:</label>
    <select id="tipoVinilo">
      <option value="15">Vinilo estándar (€15/m²)</option>
      <option value="25">Vinilo premium (€25/m²)</option>
      <option value="30">Cambio de color (€30/m²)</option>
      <option value="35">Personalizado (€35/m²)</option>
    </select>
  </div>
  <div class="form-group">
    <label for="horasTrabajo">Horas estimadas:</label>
    <input type="number" id="horasTrabajo" value="20" />
  </div>
  <div class="form-group">
    <label for="tarifaHora">Tarifa por hora (€):</label>
    <input type="number" id="tarifaHora" value="30" />
  </div>
  <div class="form-group">
    <label for="anchoVinilo">Ancho del vinilo (m):</label>
    <input type="number" id="anchoVinilo" value="1.52" step="0.01" />
  </div>
  <button onclick="calcularPresupuesto()">Calcular Presupuesto</button>
  <div id="resultado" class="resultado"></div>

  <script>
    const datos = {
      "Abarth": {
        "500C": { largo: "3660 mm", ancho: "1627 mm", alto: "1485 mm" }
      },
      "BMW": {
        "i7": { largo: "5391 mm", ancho: "1950 mm", alto: "1544 mm" }
      }
    };

    function cargarModelos() {
      const marca = document.getElementById("marca").value;
      const modeloSelect = document.getElementById("modelo");
      modeloSelect.innerHTML = '<option value="">-- Selecciona modelo --</option>';
      if (!datos[marca]) return;
      for (let modelo in datos[marca]) {
        let opt = document.createElement("option");
        opt.value = modelo;
        opt.textContent = modelo;
        modeloSelect.appendChild(opt);
      }
    }

    function mostrarDimensiones() {
      const marca = document.getElementById("marca").value;
      const modelo = document.getElementById("modelo").value;
      const d = datos[marca]?.[modelo];
      if (!d) return;
      document.getElementById("dimensiones").innerHTML = 
        `<strong>Dimensiones:</strong> Largo: ${d.largo}, Ancho: ${d.ancho}, Alto: ${d.alto}`;
    }

    function limpiarNumero(valor) {
      return parseFloat(valor.replace(/[^0-9.,]/g, '').replace(',', '.')) || 0;
    }

    function calcularPresupuesto() {
      const marca = document.getElementById("marca").value;
      const modelo = document.getElementById("modelo").value;
      const d = datos[marca]?.[modelo];
      if (!d) return alert("Selecciona un modelo válido.");

      const largo = limpiarNumero(d.largo) / 1000;
      const ancho = limpiarNumero(d.ancho) / 1000;
      const alto = limpiarNumero(d.alto) / 1000;

      const area = 0.8 * (2 * (largo * alto + ancho * alto) + largo * ancho);
      const anchoVinilo = parseFloat(document.getElementById("anchoVinilo").value) || 1.52;
      const metrosLineales = area / anchoVinilo;

      const tipoPrecio = parseFloat(document.getElementById("tipoVinilo").value) || 15;
      const dificultad = parseFloat(document.getElementById("dificultad").value) || 0;
      const horas = parseFloat(document.getElementById("horasTrabajo").value) || 0;
      const tarifa = parseFloat(document.getElementById("tarifaHora").value) || 0;

      const material = area * tipoPrecio;
      const manoObra = horas * tarifa;
      const total = (material + manoObra) * (1 + dificultad);

      document.getElementById("resultado").innerHTML = `
        <p><strong>Área estimada:</strong> ${area.toFixed(2)} m²</p>
        <p><strong>Metros lineales:</strong> ${metrosLineales.toFixed(2)} m</p>
        <p><strong>Total estimado:</strong> ${total.toFixed(2)} €</p>
      `;
    }
  </script>
</body>
</html>
